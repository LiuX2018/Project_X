function DefineAllChildWindowsSettingPanelComponents(childWindow,parentWindow)
fontSize = childWindow.AODChildHandles.FontSize;
[ currentOpticalSystem,saved] = ...
    parentWindow.getCurrentOpticalSystem;
nSurface = currentOpticalSystem.NumberOfSurfaces;
nField = currentOpticalSystem.NumberOfFieldPoints;
nWavelength = currentOpticalSystem.NumberOfWavelengths;

lblSurfaceIndex = uicontrol( ...
    'Tag', 'lblSurfaceIndex', ...
    'Style', 'text', ...
    'HorizontalAlignment','Left',...
    'FontSize',fontSize,'FontName', 'FixedWidth',...
    'Visible','off',...
    'String', 'Surface Index');

popSurfaceIndex = uicontrol( ...
    'Tag', 'popApertureType', ...
    'FontSize',fontSize,'FontName', 'FixedWidth',...
    'Visible','off',...
    'Style', 'popupmenu', ...
    'BackgroundColor', [1 1 1], ...
    'String', [num2cell(1:nSurface)],...
    'Value',nSurface);

lblCoatingName = uicontrol( ...
    'Tag', 'lblCoatingName', ...
    'Style', 'text', ...
    'HorizontalAlignment','Left',...
    'FontSize',fontSize,'FontName', 'FixedWidth',...
    'Visible','off',...
    'String', 'Coating Name');

txtCoatingName = uicontrol( ...
    'Tag', 'txtCoatingName', ...
    'Style', 'edit', ...
    'FontSize',fontSize,'FontName', 'FixedWidth',...
    'Visible','off',...
    'BackgroundColor', [1 1 1], ...
    'String', 'None', ...
    'Enable','Off',...
    'HorizontalAlignment', 'left');
% ------------------------------------------------------------
lblWavelengthIndex = uicontrol( ...
    'Tag', 'lblWavelengthIndex', ...
    'Style', 'text', ...
    'HorizontalAlignment','Left',...
    'FontSize',fontSize,'FontName', 'FixedWidth',...
    'Visible','off',...
    'String', 'Wavelength Index');

popWavelengthIndex = uicontrol( ...
    'Tag', 'popWavelengthIndex', ...
    'FontSize',fontSize,'FontName', 'FixedWidth',...
    'Visible','off',...
    'Style', 'popupmenu', ...
    'BackgroundColor', [1 1 1], ...
    'String', ['All',num2cell(1:nWavelength)],...
    'Value',1);

lblWavelength = uicontrol( ...
    'Tag', 'lblWavelength', ...
    'Style', 'text', ...
    'HorizontalAlignment','Left',...
    'FontSize',fontSize,'FontName', 'FixedWidth',...
    'Visible','off',...
    'String', 'Wavelength (um)');

txtWavelength = uicontrol( ...
    'Tag', 'txtWavelength', ...
    'Style', 'edit', ...
    'FontSize',fontSize,'FontName', 'FixedWidth',...
    'Visible','off',...
    'BackgroundColor', [1 1 1], ...
    'String', '0.55', ...
    'HorizontalAlignment', 'left');


lblMinAngle = uicontrol( ...
    'Tag', 'lblMinAngle', ...
    'Style', 'text', ...
    'HorizontalAlignment','Left',...
    'FontSize',fontSize,'FontName', 'FixedWidth',...
    'Visible','off',...
    'String', 'Min Angle (deg)');

txtMinAngle = uicontrol( ...
    'Tag', 'txtMinAngle', ...
    'Style', 'edit', ...
    'FontSize',fontSize,'FontName', 'FixedWidth',...
    'Visible','off',...
    'BackgroundColor', [1 1 1], ...
    'String', '0', ...
    'HorizontalAlignment', 'left');
lblMaxAngle = uicontrol( ...
    'Tag', 'lblMaxAngle', ...
    'Style', 'text', ...
    'HorizontalAlignment','Left',...
    'FontSize',fontSize,'FontName', 'FixedWidth',...
    'Visible','off',...
    'String', 'Max Angle (deg)');

txtMaxAngle = uicontrol( ...
    'Tag', 'txtMaxAngle', ...
    'Style', 'edit', ...
    'FontSize',fontSize,'FontName', 'FixedWidth',...
    'Visible','off',...
    'BackgroundColor', [1 1 1], ...
    'String', '90', ...
    'HorizontalAlignment', 'left');
lblAngleStep = uicontrol( ...
    'Tag', 'lblAngleStep', ...
    'Style', 'text', ...
    'HorizontalAlignment','Left',...
    'FontSize',fontSize,'FontName', 'FixedWidth',...
    'Visible','off',...
    'String', 'Angle Step (deg)');

txtAngleStep = uicontrol( ...
    'Tag', 'txtAngleStep', ...
    'Style', 'edit', ...
    'FontSize',fontSize,'FontName', 'FixedWidth',...
    'Visible','off',...
    'BackgroundColor', [1 1 1], ...
    'String', '0.1', ...
    'HorizontalAlignment', 'left');
% ------------------------------------------------------------
lblFieldIndex = uicontrol( ...
    'Tag', 'lblFieldIndex', ...
    'Style', 'text', ...
    'HorizontalAlignment','Left',...
    'FontSize',fontSize,'FontName', 'FixedWidth',...
    'Visible','off',...
    'String', 'Field Index');

popFieldIndex = uicontrol( ...
    'Tag', 'popFieldIndex', ...
    'FontSize',fontSize,'FontName', 'FixedWidth',...
    'Visible','off',...
    'Style', 'popupmenu', ...
    'BackgroundColor', [1 1 1], ...
    'String', ['All',num2cell(1:nField)],...
    'Value',1);

lblIncidenceAngle = uicontrol( ...
    'Tag', 'lblIncidenceAngle', ...
    'Style', 'text', ...
    'HorizontalAlignment','Left',...
    'FontSize',fontSize,'FontName', 'FixedWidth',...
    'Visible','off',...
    'String', 'Incidence Angle (deg)');

txtIncidenceAngle = uicontrol( ...
    'Tag', 'txtIncidenceAngle', ...
    'Style', 'edit', ...
    'FontSize',fontSize,'FontName', 'FixedWidth',...
    'Visible','off',...
    'BackgroundColor', [1 1 1], ...
    'String', '0', ...
    'HorizontalAlignment', 'left');


lblMinWavelength = uicontrol( ...
    'Tag', 'lblMinWavelength', ...
    'Style', 'text', ...
    'HorizontalAlignment','Left',...
    'FontSize',fontSize,'FontName', 'FixedWidth',...
    'Visible','off',...
    'String', 'Min Wavelength (um)');

txtMinWavelength = uicontrol( ...
    'Tag', 'txtMinWavelength', ...
    'Style', 'edit', ...
    'FontSize',fontSize,'FontName', 'FixedWidth',...
    'Visible','off',...
    'BackgroundColor', [1 1 1], ...
    'String', '0.40', ...
    'HorizontalAlignment', 'left');
lblMaxWavelength = uicontrol( ...
    'Tag', 'lblMaxWavelength', ...
    'Style', 'text', ...
    'HorizontalAlignment','Left',...
    'FontSize',fontSize,'FontName', 'FixedWidth',...
    'Visible','off',...
    'String', 'Max Wavelength (um)');

txtMaxWavelength = uicontrol( ...
    'Tag', 'txtMaxWavelength', ...
    'Style', 'edit', ...
    'FontSize',fontSize,'FontName', 'FixedWidth',...
    'Visible','off',...
    'BackgroundColor', [1 1 1], ...
    'String', '0.60', ...
    'HorizontalAlignment', 'left');
lblWavelengthStep = uicontrol( ...
    'Tag', 'lblWavelengthStep', ...
    'Style', 'text', ...
    'HorizontalAlignment','Left',...
    'FontSize',fontSize,'FontName', 'FixedWidth',...
    'Visible','off',...
    'String', 'Wavelength Step (um)');

txtWavelengthStep = uicontrol( ...
    'Tag', 'txtWavelengthStep', ...
    'Style', 'edit', ...
    'FontSize',fontSize,'FontName', 'FixedWidth',...
    'Visible','off',...
    'BackgroundColor', [1 1 1], ...
    'String', '0.01', ...
    'HorizontalAlignment', 'left');
%--------------------------------------------------------------
lblPupilGridSize = uicontrol( ...
    'Tag', 'lblPupilGridSize', ...
    'Style', 'text', ...
    'HorizontalAlignment','Left',...
    'FontSize',fontSize,'FontName', 'FixedWidth',...
    'Visible','off',...
    'String', 'Pupil GridSize');

popPupilGridSize = uicontrol( ...
    'Tag', 'popFieldIndex', ...
    'FontSize',fontSize,'FontName', 'FixedWidth',...
    'Visible','off',...
    'Style', 'popupmenu', ...
    'BackgroundColor', [1 1 1], ...
    'String', {'1x1','3x3','5x5','7x7','9x9','11x11','13x13',...
    '15x15','17x17','19x19','21x21','23x23','25x25','27x27',...
    '29x29','31x31','33x33','35x35','37x37','39x39','41x41'},...
    'Value',1);
%--------------------------------------------------------------
panelJonesVector = uipanel(...
    'FontSize',fontSize,'FontName', 'FixedWidth',...
    'Title','Jones Vector',...
    'Visible','off');
lblJs = uicontrol( ...
    'Parent', panelJonesVector, ...
    'Tag', 'lblJs', ...
    'Style', 'text', ...
    'HorizontalAlignment','Left',...
    'FontSize',fontSize,'FontName', 'FixedWidth',...
    'Units', 'normalized', ...
    'Position',[0.1,0.4,0.3,0.2],...
    'String', 'Js',...
    'Visible','off');
lblJp = uicontrol( ...
    'Parent', panelJonesVector, ...
    'Tag', 'lblJp', ...
    'Style', 'text', ...
    'HorizontalAlignment','Left',...
    'FontSize',fontSize,'FontName', 'FixedWidth',...
    'Units', 'normalized', ...
    'Position',[0.1,0.1,0.3,0.2],...
    'String', 'Jp',...
    'Visible','off');
lblMagnitued = uicontrol( ...
    'Parent', panelJonesVector, ...
    'Tag', 'lblMagnitued', ...
    'Style', 'text', ...
    'HorizontalAlignment','Left',...
    'FontSize',fontSize,'FontName', 'FixedWidth',...
    'Units', 'normalized', ...
    'Position',[0.25,0.7,0.3,0.2],...
    'String', 'Magnitude',...
    'Visible','off');
lblPhase = uicontrol( ...
    'Parent', panelJonesVector, ...
    'Tag', 'lblPhase', ...
    'Style', 'text', ...
    'HorizontalAlignment','Left',...
    'FontSize',fontSize,'FontName', 'FixedWidth',...
    'Units', 'normalized', ...
    'Position',[0.57,0.7,0.3,0.2],...
    'String', 'Phase(deg)',...
    'Visible','off');
txtMagJs = uicontrol( ...
    'Parent', panelJonesVector, ...
    'Tag', 'txtMagJs', ...
    'Style', 'edit', ...
    'BackgroundColor',[1,1,1],...
    'HorizontalAlignment','Left',...
    'FontSize',fontSize,'FontName', 'FixedWidth',...
    'Units', 'normalized', ...
    'Position',[0.22,0.4,0.3,0.2],...
    'String', '1',...
    'Visible','off');
txtPhaseJs = uicontrol( ...
    'Parent', panelJonesVector, ...
    'Tag', 'txtPhaseJs', ...
    'Style', 'edit', ...
    'BackgroundColor',[1,1,1],...
    'HorizontalAlignment','Left',...
    'FontSize',fontSize,'FontName', 'FixedWidth',...
    'Units', 'normalized', ...
    'Position',[0.55,0.4,0.3,0.20],...
    'String', '0',...
    'Visible','off');
txtMagJp = uicontrol( ...
    'Parent', panelJonesVector, ...
    'Tag', 'txtMagJp', ...
    'Style', 'edit', ...
    'BackgroundColor',[1,1,1],...
    'HorizontalAlignment','Left',...
    'FontSize',fontSize,'FontName', 'FixedWidth',...
    'Units', 'normalized', ...
    'Position',[0.22,0.10,0.3,0.20],...
    'String', '1',...
    'Visible','off');
txtPhaseJp = uicontrol( ...
    'Parent', panelJonesVector, ...
    'Tag', 'txtPhaseJp', ...
    'Style', 'edit', ...
    'BackgroundColor',[1,1,1],...
    'HorizontalAlignment','Left',...
    'FontSize',fontSize,'FontName', 'FixedWidth',...
    'Units', 'normalized', ...
    'Position',[0.55,0.10,0.3,0.20],...
    'String', '0',...
    'Visible','off');
%--------------------------------------------------------------
lblNumberOfRay = uicontrol( ...
    'Tag', 'lblNumberOfRay', ...
    'Style', 'text', ...
    'HorizontalAlignment','Left',...
    'FontSize',fontSize,'FontName', 'FixedWidth',...
    'Visible','off',...
    'String', 'Number Of Ray');
txtNumberOfRay = uicontrol( ...
    'Tag', 'txtNumberOfRay', ...
    'Style', 'edit', ...
    'FontSize',fontSize,'FontName', 'FixedWidth',...
    'Visible','off',...
    'BackgroundColor', [1 1 1], ...
    'String', '3', ...
    'HorizontalAlignment', 'left');
lblPupilSamplingType = uicontrol( ...
    'Tag', 'lblPupilSamplingType', ...
    'Style', 'text', ...
    'HorizontalAlignment','Left',...
    'FontSize',fontSize,'FontName', 'FixedWidth',...
    'Visible','off',...
    'String', 'Sampling Type');
popPupilSamplingType = uicontrol( ...
    'Tag', 'popPupilSamplingType', ...
    'FontSize',fontSize,'FontName', 'FixedWidth',...
    'Visible','off',...
    'Style', 'popupmenu', ...
    'BackgroundColor', [1 1 1], ...
    'String', {'Cartesian','Polar Grid','Hexagonal',...
    'Isoenergetic Circular','Tangential Plane','Sagital Plane','Random'},...
    'Value',1);
%--------------------------------------------------------------
chkCheifAndMariginalRay = uicontrol( ...
    'Tag', 'chkCheifAndMariginalRay', ...
    'FontSize',fontSize,'FontName', 'FixedWidth',...
    'Visible','off',...
    'Style', 'checkbox', ...
    'String', 'Cheif And Mariginal Ray Only',...
    'Value',0);
%-----------------------------------------------------------------------
chkShowTotalNumberOfSurfaces = uicontrol( ...
    'Tag', 'chkShowTotalNumberOfSurfaces', ...
    'FontSize',fontSize,'FontName', 'FixedWidth',...
    'Visible','off',...
    'Style', 'checkbox', ...
    'String', 'Total Number Of Surfaces',...
    'Value',0);
chkShowStopSurfaceIndex = uicontrol( ...
    'Tag', 'chkShowStopSurfaceIndex', ...
    'FontSize',fontSize,'FontName', 'FixedWidth',...
    'Visible','off',...
    'Style', 'checkbox', ...
    'String', 'Stop Surface Index',...
    'Value',0);
chkShowSystemTotalTrack = uicontrol( ...
    'Tag', 'chkShowSystemTotalTrack', ...
    'FontSize',fontSize,'FontName', 'FixedWidth',...
    'Visible','off',...
    'Style', 'checkbox', ...
    'String', 'System Total Track',...
    'Value',0);
chkShowEffectiveFocalLength = uicontrol( ...
    'Tag', 'chkShowEffectiveFocalLength', ...
    'FontSize',fontSize,'FontName', 'FixedWidth',...
    'Visible','off',...
    'Style', 'checkbox', ...
    'String', 'Effective Focal Length',...
    'Value',0);
chkShowBackFocalLength = uicontrol( ...
    'Tag', 'chkShowBackFocalLength', ...
    'FontSize',fontSize,'FontName', 'FixedWidth',...
    'Visible','off',...
    'Style', 'checkbox', ...
    'String', 'Back Focal Length',...
    'Value',0);
chkShowAngularMagnification = uicontrol( ...
    'Tag', 'chkShowAngularMagnification', ...
    'FontSize',fontSize,'FontName', 'FixedWidth',...
    'Visible','off',...
    'Style', 'checkbox', ...
    'String', 'Angular Magnification',...
    'Value',0);
chkShowEntrancePupilDiameter = uicontrol( ...
    'Tag', 'chkShowEntrancePupilDiameter', ...
    'FontSize',fontSize,'FontName', 'FixedWidth',...
    'Visible','off',...
    'Style', 'checkbox', ...
    'String', 'Entrance Pupil Diameter',...
    'Value',0);
chkShowEntrancePupilLocation = uicontrol( ...
    'Tag', 'chkShowEntrancePupilLocation', ...
    'FontSize',fontSize,'FontName', 'FixedWidth',...
    'Visible','off',...
    'Style', 'checkbox', ...
    'String', 'Entrance Pupil Location',...
    'Value',0);
chkShowExitPupilDiameter = uicontrol( ...
    'Tag', 'chkShowExitPupilDiameter', ...
    'FontSize',fontSize,'FontName', 'FixedWidth',...
    'Visible','off',...
    'Style', 'checkbox', ...
    'String', 'Exit Pupil Diameter',...
    'Value',0);
chkShowExitPupilLocation = uicontrol( ...
    'Tag', 'chkShowExitPupilLocation', ...
    'FontSize',fontSize,'FontName', 'FixedWidth',...
    'Visible','off',...
    'Style', 'checkbox', ...
    'String', 'Exit Pupil Location',...
    'Value',0);
chkShowObjectSpaceNA = uicontrol( ...
    'Tag', 'chkShowObjectSpaceNA', ...
    'FontSize',fontSize,'FontName', 'FixedWidth',...
    'Visible','off',...
    'Style', 'checkbox', ...
    'String', 'Object Space NA',...
    'Value',0);
chkShowImageSpaceNA = uicontrol( ...
    'Tag', 'chkShowImageSpaceNA', ...
    'FontSize',fontSize,'FontName', 'FixedWidth',...
    'Visible','off',...
    'Style', 'checkbox', ...
    'String', 'Image Space NA',...
    'Value',0);
%-----------------------------------------------------------------------

%-----------------------------------------------------------------------
% Callbacks of uicontrols
set(popSurfaceIndex,...
    'Callback',{@popSurfaceIndex_Callback,childWindow,parentWindow});
set(popWavelengthIndex,...
    'Callback',{@popWavelengthIndex_Callback,childWindow,parentWindow});
set(chkCheifAndMariginalRay,...
    'Callback',{@chkCheifAndMariginalRay_Callback,childWindow,parentWindow});

    function popWavelengthIndex_Callback(hObject, ~,childWindow,parentWindow)
        parentHandle = parentWindow.AODParentHandles;
        childHandle = childWindow.AODChildHandles;
        [ currentOpticalSystem,saved] = ...
            parentWindow.getCurrentOpticalSystem;
        
        wavLengthIndexList = (get(hObject,'String'));
        wavLengthIndexString = (wavLengthIndexList{get(hObject,'Value')});
        if strcmpi(wavLengthIndexString,'New Wavelength')
            % enable wavelength text box
            set(childHandle.txtWavelength,'String',...
                num2str(0.55*10^-6/(currentOpticalSystem.getWavelengthUnitFactor)),...
                'Enable','On');
        elseif strcmpi(wavLengthIndexString,'All')
        else
            maxWavIndexDefined = currentOpticalSystem.NumberOfWavelengths;
            wavLengthIndex = str2double(wavLengthIndexString);
            if wavLengthIndex > maxWavIndexDefined
                set(hObject,'Value',maxWavIndexDefined+1);
                wavLengthIndex = maxWavIndexDefined;
            end
            % write the wavelength on the wavelength text box and disable it
            wavelength = currentOpticalSystem.WavelengthMatrix(wavLengthIndex,1);
            % Convert from wavelengthunit to um
            wavelength = (wavelength*currentOpticalSystem.getWavelengthUnitFactor)/(10^-6);
            set(childHandle.txtWavelength,'String',num2str(wavelength),'Enable','Off');
        end
    end

    function popSurfaceIndex_Callback(hObject,~,childWindow,parentWindow)
        parentHandle = parentWindow.AODParentHandles;
        childHandle = childWindow.AODChildHandles;
        [ currentOpticalSystem,saved] = ...
            parentWindow.getCurrentOpticalSystem;
        
        surfIndexList = cellstr (get(hObject,'String'));
        surfIndexString = (surfIndexList{get(hObject,'Value')});
        if strcmpi(surfIndexString,'New Coating') % enter new coating
            % enable coating name text box
            set(childHandle.txtCoatingName,'String','None','Enable','On');
        else
            surfIndex = str2double(surfIndexString);
            % write the coating name on the text box and disable it
            coating = currentOpticalSystem.SurfaceArray(surfIndex).Coating;
            set(childHandle.txtCoatingName,'String',coating.Name,'Enable','Off');
        end
    end

    function chkCheifAndMariginalRay_Callback(hObject,~,childWindow,parentWindow)
        parentHandle = parentWindow.AODParentHandles;
        childHandle = childWindow.AODChildHandles;
        if get(childHandle.chkCheifAndMariginalRay,'Value')
            set(childHandle.txtNumberOfRay,'String','3','Enable','Off');
        else
            set(childHandle.txtNumberOfRay,'String','3','Enable','On');
        end
    end
% Save all UI controls to temp .mat file so that they can be loaded in the
% calling function.
save('tempSettingComponents');
end

